                PAGE 0
                ;$+MACRO
 0001 #         POW0	SET		1
 0002 #         POW1	SET		2
 0004 #         POW2	SET		4
 0008 #         POW3	SET		8
 0010 #         POW4	SET		10H
 0020 #         POW5	SET		20H
 0040 #         POW6	SET		40H
 0080 #         POW7	SET		80H
 0100 #         POW8	SET		100H
                
 0080 #         ALSET1	SET		080H
 00C0 #         ALSET2	SET		0C0H
 00E0 #         ALSET3	SET		0E0H
 00F0 #         ALSET4	SET		0F0H
 00F8 #         ALSET5	SET		0F8H
 00FC #         ALSET6	SET		0FCH
 00FE #         ALSET7	SET		0FEH
 00FF #         ALSET8	SET		0FFH
 80FF #         ALSET9	SET		080FFH
 C0FF #         ALSET10	SET		0C0FFH
 E0FF #         ALSET11	SET		0E0FFH
 F0FF #         ALSET12	SET		0F0FFH
 F8FF #         ALSET13	SET		0F8FFH
 FCFF #         ALSET14	SET		0FCFFH
 FEFF #         ALSET15	SET		0FEFFH
 FFFF #         ALSET16	SET		0FFFFH
                
                
 0000 #         SD		SET		0			;SINGLE DENS (FM) CODE
 0040 #         DD		SET		40H			;DOUBLE DENS (MFM) CODE
 004D #         TRACKS8	SET		77
 0028 #         TRACKS5	SET		40
                
                FDREL	MACRO	INCHES,DENS,SLEN,SPT,GAPLRW,GAPLFM,SKEW,SINGSIDE,DOUBSIDE
                		DB		INCHES+DENS,SLEN,SPT,GAPLRW,GAPLFM,SKEW
                ;;		DB		INCHES+DENS				;INCHES+DENS
                ;;		DB		SLEN					;SLEN: 0=128, 1=245, 2=512, 3=1024
                ;;		DB		SPT					;SECTORS PER TRACK
                ;;		DB		GAP1RW				;GAP 1 LENGTH FOR NEC765 READ/WRITE CMDS
                ;;		DB		GAP1FM				;GAP 1 LENGTH FOR NEC765 FORMAT TRACK CMD
                ;;		DB		SKEW					;SKEW FACTOR
                SECTPT	SET		SPT
                ;; SET TRKLEN TO # OF 128-BLOCKS / TRACK
                		SETPOW	LSPERPS,%SLEN		;LOGICAL SECTORS PER PHYSICAL SECTOR
                TRKLEN	SET		LSPERPS*SECTPT
                TRKS	SET		TRACKS&INCHES		;KK ADDED TRKS TO DOUBLE CAPACITY ON 2 SIDED
                		FDREL1	INCHES,SINGSIDE
                
                ;;SECTPT	SET		SECTPT+SECTPT	;;KK DON'T DOUBLE
                ;;TRKLEN	SET		TRKLEN+TRKLEN	;;KK DTRKLEN IS NOT CYLINDER LENGTH
                TRKS	SET		TRKS+TRKS			;;KK DOUBLE THIS INSTEAD
                		FDREL1	INCHES,DOUBSIDE
                		ENDM
                
                
                FDREL1	MACRO	INCHES,TOFFSET,BSHIFTF,DIRBKS,DIRENTS,MSDSAL,MSDRDE,MSDMBY
                		SETPOW	BSHIFTM,%BSHIFTF
                ;;DSM	SET	(TRKLEN*(TRACKS&INCHES-TOFFSET)/BSHIFTM)-1	;KK MODIFIED AS
                DSM		SET	(TRKLEN*(TRKS-TOFFSET)/BSHIFTM)-1			;KK ...THIS LINE
                ;; MAKE NUMBER OF DIRECTORY ENTRIES FROM DIRBKS OR DIRENTS
                DIRE	SET		0
                		IF NOT NUL DIRBKS
                DIRE	SET		(DIRBKS)*4*BSHIFTM
                		ENDIF
                		IF NOT NUL DIRENTS
                DIRE	SET		DIRENTS
                		ENDIF
                ;; NOW REVERSE ENGINEER TO GET DIRECTORY BLOCKS
                DIRB	SET		((DIRE+3)/4+BSHIFTM-1)/BSHIFTM
                		IF NOT NUL DIRBKS
                		IF DIRBKS > DIRB
                DIRB	SET		DIRBKS
                		ENDIF
                		ENDIF
                		IF DSM < 256
                		SETPOW	EXM,%BSHIFTF-3
                		ELSE
                		SETPOW	EXM,%BSHIFTF-4
                		ENDIF
                		SETAL01	%DIRB
                		DB		TRKLEN,0,BSHIFTF,BSHIFTM-1,EXM-1
                ;;		DB		TRKLEN				;TRKLEN
                ;;		DB		0					;0
                ;;		DB		BSHIFTF					;BSHIFTF
                ;;		DB		BSHIFTM-1			;BSHIFTM-1
                ;;		DB		EXM-1				;EXM-1
                
                ;;		DW		DSM,DIRE-1,AL01,(DIRE+3)/4,TOFFSET,0	;KK MAKES TOO BIG
                														;KK ..CKS
                CKSIZE	SET		(DIRE+3)/4								;KK
                		IF	INCHES EQ 5									;KK
                CKMAX	SET		30H										;KK
                		ELSE											;KK
                CKMAX	SET		20H										;KK
                		ENDIF
                		IF	CKSIZE GT CKMAX								;KK
                CKSIZE	SET		CKMAX									;KK
                		ENDIF											;KK
                		DW		DSM,DIRE-1,AL01,CKSIZE,TOFFSET,0		;;KK
                ;;		DW		DSM					;DSM
                ;;		DW		DIRE-1				;DIRRECTORY ENTRIES
                ;;		DW		AL01				;ALLOCATION
                ;;		DW		CKSIZE				;CHECK SIZE
                ;;		DW		TOFFSET					;TRACKS OFFSET
                ;;		DW		0					;0
                
                ; NOTE: DUMMY CP/M-3 PSH AND PHM FOLLOWS TRACK OFFSET
                ; BPB FOLLOWS...
                TOTSECT	SET		SECTPT*TRKS			;TOTAL NUMBER OF SECTORS IN MEDIA
                TOTALOC	SET		TOTSECT/MSDSAL		;TOTAL ALLOCATION UNITS IN MEDIA
                SLEN	SET		LSPERPS*128			;SECTOR LENGTH IN BYTES
                CFS		SET		(TOTALOC+TOTALOC+TOTALOC+SLEN+SLEN-1)/(SLEN+SLEN)
                ;;		DW		SLEN,MSDSAL,1,0,2,MSDRDE,TOTSECT,MSDMBY,CFS,SECTPT
                		DW		SLEN				;BYTES/SECTOR
                		DB		MSDSAL,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
                		DW		MSDRDE,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
                		DB		MSDMBY				;MEDIA BYTE
                		DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                		ENDM
                
                SETPOW	MACRO	RESULT,ARG
                RESULT	SET		POW&ARG
                		ENDM
                
                SETAL01	MACRO	ARG
                AL01	SET		ALSET&ARG
                		ENDM
                
                ;
                ;		RELATIONSHIP BETWEEN --
                ;
                ;		DISK TYPE			GAP LENGTH 1
                ;		SECTOR LENGTH		GAP LENGTH 2
                ;		NUMBER OF SECTORS	SKEW FACTOR
                ;
                ;		PLUS FOR CP/M ONE AND TWO SIDED DPB'S
                ;
                ;		DPB PARAMETERS ARE <ONE SIDE>,<TWO SIDES>
                ;		WITHIN THE POINTY BRACKETS ARE ---
                ;
                ;	P1	TRACK OFFSET (IS THIS EVER NOT = 2?)
                ;	P2	CP/M ALLOCATION UNIT SIZE (3=1K, 4=2K, 5=4K, 6=8K, 7=16K)
                ;	P3	ALLOCATION UNITS RESERVER FOR DIRECTORY
                ;	P4	MAXIMUM NUMBER OF FILES ALLOWED (IF NULL THEN COMPUTE FROM P3)
                ;
                ;		AND THEN FOR MS-DOS...
                ;
                ;	P5	(PHYSICAL) SECTORS/ALLOCATION UNIT
                ;	P6	NUMBER OF ROOT DIRECTORY ENTRIES
                ;	P7	MEDIA BYTE
                ;		SECTORS REQUIRED TO HOLD FAT IS GENERATED IN MACRO
                ;
                ;		ALL PARAMETERS ARE REQUIRED EXCEPT ONLY ONE OF P3/P4
                ;		NEED BE PRESENT.  IF BOTH P3 AND P4 ARE PRESENT, P3 IS
                ;		ONLY USED IF IT IS LARGER THAN NEEDED.
                ;
                ;	TYPE:
                ;		05H	5" SINGLE DENSITY (FM)
                ;		08H	8" SINGLE DENSITY (FM)
                ;		45H	5" DOUBLE DENSITY (MFM)
                ;		48H	8" DOUBLE DENSITY (MFM)
                ;
                ;	SECTOR LENGTH
                ;		0	128
                ;		1	256
                ;		2	512
                ;		3	1024
                ;
                ;	NUMBER OF SECTORS PER TRACK:
                ;		SECTORS PER SIDE IF DOUBLE SIDED
                ;
                ;	GAP LEN1:
                ;		GAP LENGTH TO BE USED WITH NEC765 (INTEL 8272) READ/WRITE CMDS
                ;
                ;	GAP LEN2:
                ;		GAP LENGTH TO BE USED WITH NEC765 FORMAT TRACK COMMAND
                ;
                ;	SKEW FACTOR:
                ;		LOGICALY CONTIEGEOUS SECTORS ARE THIS FAR APART
                ;
                ;KK CP/M TOFFSET DOUBLED ON DOUBLE SIDED FLOPPIES
                
                FDRELTAB:
                STD8:
                 FDREL 8,SD,0,26,007H,01BH,6,<2,3,2,,4,068,002H>,<4,4,2,,4,068,003H>;8" SD 128
 0000+08001A071B	DB		8+SD,0,26,007H,01BH,6
 0006+1A00030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 000B+F2003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0017+8000      	DW		SLEN				;BYTES/SECTOR
 0019+04010002  	DB		4,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 001D+4400D207  	DW		068,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0021+02        	DB		002H				;MEDIA BYTE
 0022+06001A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0026+1A00040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 002B+F2007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0037+8000      	DW		SLEN				;BYTES/SECTOR
 0039+04010002  	DB		4,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 003D+4400A40F  	DW		068,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0041+03        	DB		003H				;MEDIA BYTE
 0042+0C001A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0046 =         LENFDREL	EQU		$-FDRELTAB
                 FDREL 8,SD,1,15,00EH,02AH,1,<2,4,2,,2,112,004H>,<4,4,2,,2,112,005H>;8" SD 256
 0046+08010F0E2A	DB		8+SD,1,15,00EH,02AH,1
 004C+1E00040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0051+8B007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 005D+0001      	DW		SLEN				;BYTES/SECTOR
 005F+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0063+70008304  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0067+04        	DB		004H				;MEDIA BYTE
 0068+04000F00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 006C+1E00040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0071+18017F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 007D+0001      	DW		SLEN				;BYTES/SECTOR
 007F+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0083+70000609  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0087+05        	DB		005H				;MEDIA BYTE
 0088+07000F00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 8,SD,2,08,01BH,03AH,1,<2,4,2,,2,112,006H>,<4,4,2,,2,112,007H>;8" SD 512
 008C+0802081B3A	DB		8+SD,2,08,01BH,03AH,1
 0092+2000040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0097+95007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 00A3+0002      	DW		SLEN				;BYTES/SECTOR
 00A5+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 00A9+70006802  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 00AD+06        	DB		006H				;MEDIA BYTE
 00AE+01000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 00B2+2000040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 00B7+2B017F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 00C3+0002      	DW		SLEN				;BYTES/SECTOR
 00C5+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 00C9+7000D004  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 00CD+07        	DB		007H				;MEDIA BYTE
 00CE+02000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 8,SD,3,04,047H,08AH,1,<2,4,2,,2,112,008H>,<4,4,2,,2,112,009H>;8" SD 1024
 00D2+080304478A	DB		8+SD,3,04,047H,08AH,1
 00D8+2000040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 00DD+95007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 00E9+0004      	DW		SLEN				;BYTES/SECTOR
 00EB+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 00EF+70003401  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 00F3+08        	DB		008H				;MEDIA BYTE
 00F4+01000400  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 00F8+2000040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 00FD+2B017F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0109+0004      	DW		SLEN				;BYTES/SECTOR
 010B+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 010F+70006802  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0113+09        	DB		009H				;MEDIA BYTE
 0114+01000400  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 
                 FDREL 8,DD,1,26,00EH,036H,3,<2,4,2,,2,112,00AH>,<4,4,2,,2,112,00BH>;8" DD 256
 0118+48011A0E36	DB		8+DD,1,26,00EH,036H,3
 011E+3400040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0123+F2007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 012F+0001      	DW		SLEN				;BYTES/SECTOR
 0131+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0135+7000D207  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0139+0A        	DB		00AH				;MEDIA BYTE
 013A+06001A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 013E+3400040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0143+E6017F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 014F+0001      	DW		SLEN				;BYTES/SECTOR
 0151+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0155+7000A40F  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0159+0B        	DB		00BH				;MEDIA BYTE
 015A+0C001A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 8,DD,2,15,01BH,054H,1,<2,4,2,,2,112,00CH>,<4,4,2,,2,112,00DH>;8" DD 512
 015E+48020F1B54	DB		8+DD,2,15,01BH,054H,1
 0164+3C00040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0169+18017F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0175+0002      	DW		SLEN				;BYTES/SECTOR
 0177+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 017B+70008304  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 017F+0C        	DB		00CH				;MEDIA BYTE
 0180+02000F00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0184+3C00040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0189+31027F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0195+0002      	DW		SLEN				;BYTES/SECTOR
 0197+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 019B+70000609  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 019F+0D        	DB		00DH				;MEDIA BYTE
 01A0+04000F00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 8,DD,3,08,035H,074H,2,<2,4,2,,2,112,00EH>,<4,4,2,,1,192,00FH>;8" DD 1024 W/W
 01A4+4803083574	DB		8+DD,3,08,035H,074H,2
 01AA+4000040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 01AF+2B017F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 01BB+0004      	DW		SLEN				;BYTES/SECTOR
 01BD+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 01C1+70006802  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 01C5+0E        	DB		00EH				;MEDIA BYTE
 01C6+01000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 01CA+4000040F00	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 01CF+57027F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 01DB+0004      	DW		SLEN				;BYTES/SECTOR
 01DD+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 01E1+C000D004  	DW		192,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 01E5+0F        	DB		00FH				;MEDIA BYTE
 01E6+02000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0007 =         NFMT8		EQU		($-STD8)/LENFDREL
                
                STD5:
                 FDREL 5,SD,0,16,010H,019H,1,<2,3,2,,1,112,018H>,<4,3,2,,2,112,019H>;5" SD 128 16 SECT
 01EA+0500101019	DB		5+SD,0,16,010H,019H,1
 01F0+1000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 01F5+4B003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0201+8000      	DW		SLEN				;BYTES/SECTOR
 0203+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0207+70008002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 020B+18        	DB		018H				;MEDIA BYTE
 020C+08001000  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0210+1000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 0215+97003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0221+8000      	DW		SLEN				;BYTES/SECTOR
 0223+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0227+70000005  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 022B+19        	DB		019H				;MEDIA BYTE
 022C+08001000  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,SD,0,17,007H,009H,1,<2,3,2,,1,112,01AH>,<4,3,2,,2,112,01BH>;5" SD 128 **NEW**
 0230+0500110709	DB		5+SD,0,17,007H,009H,1
 0236+1100030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 023B+4F003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0247+8000      	DW		SLEN				;BYTES/SECTOR
 0249+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 024D+7000A802  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0251+1A        	DB		01AH				;MEDIA BYTE
 0252+08001100  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0256+1100030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 025B+A0003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0267+8000      	DW		SLEN				;BYTES/SECTOR
 0269+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 026D+70005005  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0271+1B        	DB		01BH				;MEDIA BYTE
 0272+08001100  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,SD,0,18,007H,009H,5,<3,3,,32,1,112,01CH>,<4,3,2,,2,112,01DH>;5" SD 128 XEROX
 0276+0500120709	DB		5+SD,0,18,007H,009H,5
 027C+1200030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 0281+52001F0080	DW		DSM,DIRE-1,AL01,CKSIZE,3,0
 028D+8000      	DW		SLEN				;BYTES/SECTOR
 028F+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0293+7000D002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0297+1C        	DB		01CH				;MEDIA BYTE
 0298+09001200  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 029C+1200030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 02A1+AA003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 02AD+8000      	DW		SLEN				;BYTES/SECTOR
 02AF+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 02B3+7000A005  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 02B7+1D        	DB		01DH				;MEDIA BYTE
 02B8+09001200  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,SD,1,08,018H,030H,1,<2,3,2,,1,112,01EH>,<4,3,2,,2,112,01FH>;5" SD 256
 02BC+0501081830	DB		5+SD,1,08,018H,030H,1
 02C2+1000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 02C7+4B003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 02D3+0001      	DW		SLEN				;BYTES/SECTOR
 02D5+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 02D9+70004001  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 02DD+1E        	DB		01EH				;MEDIA BYTE
 02DE+02000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 02E2+1000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 02E7+97003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 02F3+0001      	DW		SLEN				;BYTES/SECTOR
 02F5+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 02F9+70008002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 02FD+1F        	DB		01FH				;MEDIA BYTE
 02FE+02000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,SD,1,10,007H,010H,2,<3,4,,64,1,112,020H>,<4,3,2,,2,112,021H>;5" SD 256 OSBORNE
 0302+05010A0710	DB		5+SD,1,10,007H,010H,2
 0308+1400040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 030D+2D003F0080	DW		DSM,DIRE-1,AL01,CKSIZE,3,0
 0319+0001      	DW		SLEN				;BYTES/SECTOR
 031B+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 031F+70009001  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0323+20        	DB		020H				;MEDIA BYTE
 0324+03000A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0328+1400030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 032D+BD003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0339+0001      	DW		SLEN				;BYTES/SECTOR
 033B+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 033F+70002003  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0343+21        	DB		021H				;MEDIA BYTE
 0344+03000A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,SD,2,04,046H,087H,1,<2,3,2,,1,112,022H>,<4,3,2,,2,112,023H>;5" SD 512
 0348+0502044687	DB		5+SD,2,04,046H,087H,1
 034E+1000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 0353+4B003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 035F+0002      	DW		SLEN				;BYTES/SECTOR
 0361+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0365+7000A000  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0369+22        	DB		022H				;MEDIA BYTE
 036A+01000400  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 036E+1000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 0373+97003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 037F+0002      	DW		SLEN				;BYTES/SECTOR
 0381+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0385+70004001  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0389+23        	DB		023H				;MEDIA BYTE
 038A+01000400  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                
                 FDREL 5,DD,1,16,020H,032H,1,<2,3,,64,1,112,024H>,<2,4,,256,2,112,025H>;5" DD 256 16 SECT
 038E+4501102032	DB		5+DD,1,16,020H,032H,1
 0394+2000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 0399+97003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 03A5+0001      	DW		SLEN				;BYTES/SECTOR
 03A7+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 03AB+70008002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 03AF+24        	DB		024H				;MEDIA BYTE
 03B0+04001000  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 03B4+2000040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 03B9+9B00FF00F0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 03C5+0001      	DW		SLEN				;BYTES/SECTOR
 03C7+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 03CB+70000005  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 03CF+25        	DB		025H				;MEDIA BYTE
 03D0+04001000  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,1,17,00AH,00CH,1,<3,3,,64,1,112,026H>,<6,4,,128,2,112,027H>;5" DD 256 **NEW**
 03D4+4501110A0C	DB		5+DD,1,17,00AH,00CH,1
 03DA+2200030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 03DF+9C003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,3,0
 03EB+0001      	DW		SLEN				;BYTES/SECTOR
 03ED+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 03F1+7000A802  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 03F5+26        	DB		026H				;MEDIA BYTE
 03F6+04001100  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 03FA+2200040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 03FF+9C007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,6,0
 040B+0001      	DW		SLEN				;BYTES/SECTOR
 040D+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0411+70005005  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0415+27        	DB		027H				;MEDIA BYTE
 0416+04001100  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,1,18,00AH,00CH,1,<2,3,2,,1,112,028H>,<4,4,,64,2,112,029H>;5" DD 256 18 SECT
 041A+4501120A0C	DB		5+DD,1,18,00AH,00CH,1
 0420+2400030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 0425+AA003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0431+0001      	DW		SLEN				;BYTES/SECTOR
 0433+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0437+7000D002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 043B+28        	DB		028H				;MEDIA BYTE
 043C+05001200  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0440+2400040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0445+AA003F0080	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0451+0001      	DW		SLEN				;BYTES/SECTOR
 0453+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0457+7000A005  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 045B+29        	DB		029H				;MEDIA BYTE
 045C+05001200  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,2,08,02AH,050H,1,<1,3,,64,1,064,0FEH>,<2,4,,64,2,112,0FFH>;5" DD 512 PC 8 SECT
 0460+4502082A50	DB		5+DD,2,08,02AH,050H,1
 0466+2000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 046B+9B003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,1,0
 0477+0002      	DW		SLEN				;BYTES/SECTOR
 0479+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 047D+40004001  	DW		064,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0481+FE        	DB		0FEH				;MEDIA BYTE
 0482+01000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0486+2000040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 048B+9B003F0080	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0497+0002      	DW		SLEN				;BYTES/SECTOR
 0499+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 049D+70008002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 04A1+FF        	DB		0FFH				;MEDIA BYTE
 04A2+01000800  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,2,09,030H,060H,1,<2,3,,64,1,064,0FCH>,<4,4,2,,2,112,0FDH>;5" DD 512 PC 9 SECT
 04A6+4502093060	DB		5+DD,2,09,030H,060H,1
 04AC+2400030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 04B1+AA003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 04BD+0002      	DW		SLEN				;BYTES/SECTOR
 04BF+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 04C3+40006801  	DW		064,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 04C7+FC        	DB		0FCH				;MEDIA BYTE
 04C8+02000900  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 04CC+2400040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 04D1+AA007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 04DD+0002      	DW		SLEN				;BYTES/SECTOR
 04DF+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 04E3+7000D002  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 04E7+FD        	DB		0FDH				;MEDIA BYTE
 04E8+02000900  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,2,10,017H,034H,4,<2,3,,64,1,064,0FAH>,<4,4,,128,2,112,0FBH>;5" DD 512 10 SECT
 04EC+45020A1734	DB		5+DD,2,10,017H,034H,4
 04F2+2800030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 04F7+BD003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0503+0002      	DW		SLEN				;BYTES/SECTOR
 0505+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0509+40009001  	DW		064,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 050D+FA        	DB		0FAH				;MEDIA BYTE
 050E+02000A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0512+2800040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0517+BD007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0523+0002      	DW		SLEN				;BYTES/SECTOR
 0525+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0529+70002003  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 052D+FB        	DB		0FBH				;MEDIA BYTE
 052E+02000A00  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,3,04,080H,0F0H,1,<2,3,2,,1,112,030H>,<4,4,2,,2,112,031H>;5" DD 1024 4 SECT
 0532+45030480F0	DB		5+DD,3,04,080H,0F0H,1
 0538+2000030700	DB		TRKLEN,0,3,BSHIFTM-1,EXM-1
 053D+97003F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 0549+0004      	DW		SLEN				;BYTES/SECTOR
 054B+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 054F+7000A000  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0553+30        	DB		030H				;MEDIA BYTE
 0554+01000400  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 0558+2000040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 055D+97007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 0569+0004      	DW		SLEN				;BYTES/SECTOR
 056B+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 056F+70004001  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0573+31        	DB		031H				;MEDIA BYTE
 0574+01000400  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
                 FDREL 5,DD,3,05,028H,050H,3,<2,4,,128,1,112,032H>,<4,4,,192,2,112,033H>;5" DD 1024 **NEW**
 0578+4503052850	DB		5+DD,3,05,028H,050H,3
 057E+2800040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 0583+5E007F00C0	DW		DSM,DIRE-1,AL01,CKSIZE,2,0
 058F+0004      	DW		SLEN				;BYTES/SECTOR
 0591+01010002  	DB		1,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 0595+7000C800  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 0599+32        	DB		032H				;MEDIA BYTE
 059A+01000500  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 059E+2800040F01	DB		TRKLEN,0,4,BSHIFTM-1,EXM-1
 05A3+BD00BF00E0	DW		DSM,DIRE-1,AL01,CKSIZE,4,0
 05AF+0004      	DW		SLEN				;BYTES/SECTOR
 05B1+02010002  	DB		2,1,0,2				;SECTS/ALLOC, RESVD SECTS, NUMBERFATS
 05B5+70009001  	DW		112,TOTSECT			;ROOT DIR ENTS, TOTAL SECTORS IN MEDIA
 05B9+33        	DB		033H				;MEDIA BYTE
 05BA+01000500  	DW		CFS,SECTPT			;CALCULATED SECTORS PER FAT, SECTORS PER TRACK
 000E =         NFMT5		EQU		($-STD5)/LENFDREL
 05BE FF        			DB		0FFH			;END OF LIST
